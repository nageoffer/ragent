@tailwind base;
@tailwind components;
@tailwind utilities;

:root {
  color-scheme: light;
  --background: 0 0% 100%;
  --foreground: 222 47% 11%;
  --card: 210 40% 98%;
  --card-foreground: 222 47% 11%;
  --popover: 0 0% 100%;
  --popover-foreground: 222 47% 11%;
  --primary: 239 84% 67%;
  --primary-foreground: 0 0% 100%;
  --secondary: 210 40% 96%;
  --secondary-foreground: 222 47% 11%;
  --muted: 214 32% 91%;
  --muted-foreground: 215 16% 47%;
  --accent: 210 40% 96%;
  --accent-foreground: 222 47% 11%;
  --destructive: 0 84% 60%;
  --destructive-foreground: 0 0% 100%;
  --border: 214 32% 91%;
  --input: 214 32% 91%;
  --ring: 239 84% 67%;
  --chat-user: 239 84% 96%;
  --chat-assistant: 0 0% 100%;
  --glow: 239 84% 67%;

  /* ===== 新设计系统 - 背景 ===== */
  --bg-primary: #FFFFFF;
  --bg-secondary: #FAFAFA;
  --bg-tertiary: #F5F5F5;
  --bg-hover: #EEEEEE;
  --bg-active: #FEF3C7;

  /* ===== 新设计系统 - 文字 ===== */
  --text-primary: #1A1A1A;
  --text-secondary: #4A4A4A;
  --text-tertiary: #999999;
  --text-muted: #CCCCCC;
  --text-on-accent: #FFFFFF;

  /* ===== 新设计系统 - 强调色（蓝色系）===== */
  --accent-primary: #3B82F6;
  --accent-secondary: #2563EB;
  --accent-light: #DBEAFE;
  --accent-hover: #60A5FA;

  /* ===== 新设计系统 - 边框 ===== */
  --border-default: #E5E5E5;
  --border-light: #F0F0F0;
  --border-focus: #D4D4D4;
  --border-accent: #BFDBFE;

  /* ===== 新设计系统 - 状态色 ===== */
  --success: #10B981;
  --warning: #F59E0B;
  --error: #EF4444;
  --info: #3B82F6;

  /* ===== 新设计系统 - 圆角 ===== */
  --radius-sm: 6px;
  --radius-md: 12px;
  --radius-lg: 16px;
  --radius-xl: 20px;
  --radius-full: 9999px;

  /* ===== 新设计系统 - 间距 ===== */
  --spacing-xs: 4px;
  --spacing-sm: 8px;
  --spacing-md: 12px;
  --spacing-lg: 16px;
  --spacing-xl: 24px;
  --spacing-2xl: 32px;
  --spacing-3xl: 48px;
  --spacing-4xl: 64px;

  /* ===== 新设计系统 - 阴影 ===== */
  --shadow-xs: 0 1px 2px rgba(0, 0, 0, 0.04);
  --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
  --shadow-md: 0 4px 12px rgba(0, 0, 0, 0.06);
  --shadow-lg: 0 6px 16px rgba(0, 0, 0, 0.08);
  --shadow-xl: 0 10px 24px rgba(0, 0, 0, 0.10);

  /* ===== 新设计系统 - 字体 ===== */
  --font-sans: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-serif: Georgia, "Times New Roman", serif;
  --font-mono: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, monospace;

  /* ===== 新设计系统 - 字号 ===== */
  --text-xs: 12px;
  --text-sm: 13px;
  --text-base: 14px;
  --text-lg: 15px;
  --text-xl: 18px;
  --text-2xl: 24px;
  --text-3xl: 32px;
  --text-4xl: 48px;

  /* ===== 新设计系统 - 字重 ===== */
  --font-normal: 400;
  --font-medium: 500;
  --font-semibold: 600;
  --font-bold: 700;

  /* ===== 新设计系统 - 行高 ===== */
  --leading-tight: 1.25;
  --leading-normal: 1.5;
  --leading-relaxed: 1.75;

  /* ===== 新设计系统 - 过渡 ===== */
  --transition-fast: 150ms ease;
  --transition-base: 200ms ease;
  --transition-slow: 300ms ease;

  /* ===== 新设计系统 - 布局 ===== */
  --sidebar-width: 280px;
  --content-max-width: 800px;
  --header-height: 60px;

  /* ===== 旧变量保留（兼容性）===== */
  --sidebar-bg: #FAFAFA;
  --sidebar-item-active: #DBEAFE;
  --sidebar-item-hover: #F5F5F5;
  --primary-color: #3B82F6;
  --primary-light: #60A5FA;
  --primary-dark: #2563EB;
  --secondary-color: #3B82F6;
  --gradient-primary: linear-gradient(135deg, #3B82F6 0%, #2563EB 100%);
  --gradient-light: linear-gradient(135deg, #EFF6FF 0%, #DBEAFE 100%);
  --dsw-alias-brand-primary-invert: #93C5FD;
  --dsw-specific-sidebar-nav-item-active-accent: #EFF6FF;
}

.dark {
  color-scheme: light;
}

* {
  @apply border-border;
}

html,
body {
  height: 100%;
  overscroll-behavior: none;
}

body {
  @apply bg-[#FAFAFA] text-gray-900 font-body antialiased min-h-screen;
  background-color: var(--bg-secondary);
  overflow: hidden;
}

#root {
  height: 100%;
  min-height: 100vh;
}

::-webkit-scrollbar {
  width: 6px;
  height: 6px;
}

::-webkit-scrollbar-thumb {
  background: #d1d5db;
  border-radius: 999px;
}

::-webkit-scrollbar-track {
  background: transparent;
}

::-webkit-scrollbar-thumb:hover {
  background: #9ca3af;
}

.text-gradient {
  background: var(--gradient-primary);
  -webkit-background-clip: text;
  -webkit-text-fill-color: transparent;
  background-clip: text;
  color: transparent;
}

.glass {
  background: rgba(255, 255, 255, 0.7);
  border: 1px solid #e2e8f0;
  backdrop-filter: blur(20px);
}

.prose code {
  @apply font-mono;
}

.prose pre {
  @apply bg-gray-50 text-gray-800;
}

@layer components {
  .admin-layout {
    @apply bg-[#F3F4F6] text-slate-900;
    --ring: 224 76% 48%;
  }

  .admin-layout .text-muted-foreground {
    @apply text-slate-500;
  }

  .admin-layout .admin-main {
    @apply flex-1 bg-[#F3F4F6];
  }

  .admin-layout .admin-content {
    @apply mx-auto w-full max-w-[1600px] px-8 py-8;
  }

  .admin-layout .admin-topbar {
    @apply sticky top-0 z-20 border-b border-slate-200/70 bg-white/80 backdrop-blur;
  }

  .admin-layout .admin-topbar-inner {
    @apply mx-auto flex h-16 w-full max-w-[1600px] items-center justify-between gap-4 px-8;
  }

  .admin-layout .admin-topbar-search {
    @apply relative w-full max-w-[420px];
  }

  .admin-layout .admin-topbar-kbd {
    @apply absolute right-3 top-1/2 -translate-y-1/2 rounded-md border border-slate-200 bg-white px-2 py-0.5 text-[10px] text-slate-400;
  }

  .admin-layout .admin-topbar-suggest {
    @apply absolute left-0 right-0 top-full z-30 mt-2 rounded-xl border border-slate-200 bg-white p-1 shadow-lg;
  }

  .admin-layout .admin-topbar-suggest-section + .admin-topbar-suggest-section {
    @apply mt-1 border-t border-slate-100 pt-1;
  }

  .admin-layout .admin-topbar-suggest-group {
    @apply px-3 pt-2 pb-1 text-[11px] font-semibold text-slate-400;
  }

  .admin-layout .admin-topbar-suggest-item {
    @apply flex w-full flex-col items-start gap-1 rounded-lg px-3 py-2 text-left text-sm transition hover:bg-slate-100;
  }

  .admin-layout .admin-breadcrumbs {
    @apply mb-4 flex items-center gap-2 text-xs text-slate-500;
  }

  .admin-layout .admin-breadcrumbs a {
    @apply text-slate-500 transition-colors hover:text-slate-700;
  }

  .admin-layout .admin-page {
    @apply space-y-6;
  }

  .admin-layout .admin-page-header {
    @apply flex flex-col gap-3 lg:flex-row lg:items-center lg:justify-between;
  }

  .admin-layout .admin-page-title {
    @apply text-2xl font-semibold text-slate-900;
  }

  .admin-layout .admin-page-subtitle {
    @apply text-sm text-slate-500;
  }

  .admin-layout .admin-page-actions {
    @apply flex flex-1 flex-wrap items-center justify-end gap-2;
  }

  .admin-layout .admin-code {
    @apply rounded-full border border-slate-200 bg-slate-50 px-3 py-1 text-xs text-slate-600;
  }

  .admin-layout .admin-link {
    @apply inline-flex items-center gap-1 text-indigo-600 font-medium underline-offset-4 transition-colors hover:text-indigo-700 hover:underline;
  }

  .admin-layout .admin-link:focus-visible {
    @apply outline-none ring-2 ring-indigo-200 rounded-sm;
  }

  .admin-layout .admin-stat-grid {
    @apply grid gap-4 md:grid-cols-2 xl:grid-cols-4;
  }

  .admin-layout .admin-stat-scope {
    @apply text-[10px] font-medium text-slate-400;
  }

  .admin-layout .admin-stat-scope--stamp {
    @apply rounded-full border border-slate-200/70 bg-white/70 px-2 py-0.5 text-slate-400 backdrop-blur;
  }

  .admin-layout .admin-stat-card {
    @apply relative flex items-center justify-between rounded-xl border border-slate-200 bg-white p-4 shadow-sm transition-transform duration-200 hover:-translate-y-0.5;
  }


  .admin-layout .admin-stat-icon {
    @apply flex h-10 w-10 items-center justify-center rounded-full bg-indigo-50 text-indigo-600;
  }

  .admin-layout .admin-stat-label {
    @apply text-xs text-slate-500;
  }

  .admin-layout .admin-stat-value {
    @apply text-2xl font-semibold text-slate-900;
  }

  .admin-layout .admin-stat-trend {
    @apply text-xs font-medium;
  }

  .admin-layout .admin-sidebar {
    @apply flex w-64 flex-col bg-gradient-to-b from-[#1a1f2e] to-[#252d3d] text-white/70 transition-[width] duration-200;
  }

  .admin-layout .admin-sidebar--collapsed {
    @apply w-16;
  }

  .admin-layout .admin-sidebar__brand {
    @apply px-5 pb-4 pt-6;
  }

  .admin-layout .admin-sidebar__logo {
    @apply flex h-10 w-10 items-center justify-center rounded-xl bg-gradient-to-br from-[#4F46E5] to-[#7C3AED] text-sm font-semibold text-white;
  }

  .admin-layout .admin-sidebar__title {
    @apply text-sm font-semibold text-white;
  }

  .admin-layout .admin-sidebar__subtitle {
    @apply text-xs text-white/60;
  }

  .admin-layout .admin-sidebar__user {
    @apply mx-4 mb-4 flex items-center gap-3 rounded-xl border border-white/10 bg-white/5 px-3 py-2;
  }

  .admin-layout .admin-sidebar__avatar {
    @apply relative flex h-9 w-9 items-center justify-center rounded-full bg-white/15 text-xs font-semibold text-white;
  }

  .admin-layout .admin-sidebar__avatar::after {
    @apply absolute -right-0.5 -bottom-0.5 h-2.5 w-2.5 rounded-full border-2 border-[#252d3d] bg-emerald-400 content-[''];
  }

  .admin-layout .admin-sidebar__role {
    @apply rounded-full bg-white/10 px-2 py-0.5 text-[10px] text-white/70;
  }

  .admin-layout .admin-sidebar__group-title {
    @apply px-4 pb-2 text-[10px] font-semibold uppercase tracking-[0.2em] text-white/40;
  }

  .admin-layout .admin-sidebar__item {
    @apply relative flex items-center gap-3 rounded-lg px-3 py-2 text-sm font-medium transition-colors;
  }

  .admin-layout .admin-sidebar__item:hover {
    @apply bg-white/10 text-white;
  }

  .admin-layout .admin-sidebar__item--active {
    @apply bg-indigo-500/20 text-white;
  }

  .admin-layout .admin-sidebar__item--group-active {
    @apply bg-white/5 text-white;
  }

  .admin-layout .admin-sidebar__item-indicator {
    @apply absolute left-0 top-2 bottom-2 w-[3px] rounded-full bg-transparent;
  }

  .admin-layout .admin-sidebar__item-indicator.is-active {
    @apply bg-indigo-400;
  }

  .admin-layout .admin-sidebar__item-indicator.is-group-active {
    @apply bg-white/20;
  }

  .admin-layout .admin-sidebar__item-icon {
    @apply h-4 w-4 text-white/50;
  }

  .admin-layout .admin-sidebar__item--active .admin-sidebar__item-icon {
    @apply text-indigo-300;
  }

  .admin-layout .admin-sidebar__item--group-active .admin-sidebar__item-icon {
    @apply text-white/70;
  }

  .admin-layout .admin-sidebar__footer {
    @apply mt-auto px-4 pb-5;
  }

  .admin-layout .admin-sidebar__action {
    @apply w-full justify-start border-white/15 bg-white/5 text-white/80 hover:bg-white/10;
  }

  .admin-layout .admin-sidebar__logout {
    @apply w-full justify-start text-red-300 hover:bg-red-500/10 hover:text-red-200;
  }

  .admin-layout .admin-sidebar__collapse {
    @apply mt-3 flex w-full items-center justify-center gap-2 rounded-lg border border-white/10 py-2 text-xs text-white/60 transition hover:bg-white/10;
  }

  .admin-layout .ui-card {
    @apply rounded-xl border border-slate-200 bg-white shadow-[0_1px_3px_rgba(15,23,42,0.08)];
  }

  .admin-layout .ui-card-header {
    @apply border-b border-slate-100 px-6 pt-5 pb-4;
  }

  .admin-layout .ui-card-title {
    @apply text-base font-semibold text-slate-900;
  }

  .admin-layout .ui-card-description {
    @apply text-sm text-slate-500;
  }

  .admin-layout .ui-card-content {
    @apply pt-0 pb-6;
  }

  .admin-layout .ui-table-wrap {
    @apply rounded-xl border border-slate-200 bg-white overflow-x-auto;
  }

  .admin-layout .ui-card .ui-table-wrap {
    @apply -mx-6 w-[calc(100%+48px)] border-0 bg-transparent shadow-none rounded-none;
  }

  .admin-layout .ui-table {
    @apply text-[13px] text-slate-700 border-collapse;
  }

  .admin-layout .ui-table-header {
    @apply bg-[#F9FAFB];
  }

  .admin-layout .ui-table-body tr:nth-child(even) {
    @apply bg-slate-50/40;
  }

  .admin-layout .ui-table-row {
    @apply border-b border-slate-100 hover:bg-[#F9FAFB];
  }

  .admin-layout .ui-table-head {
    @apply h-14 px-4 text-xs font-semibold text-slate-500;
  }

  .admin-layout .ui-table-cell {
    @apply px-4 py-3.5;
  }

  .admin-layout .ui-table-head:first-child,
  .admin-layout .ui-table-cell:first-child {
    @apply pl-6;
  }

  .admin-layout .ui-table-head:last-child,
  .admin-layout .ui-table-cell:last-child {
    @apply pr-6;
  }

  .admin-layout .ui-table-caption {
    @apply text-slate-500;
  }

  .admin-layout .ui-input,
  .admin-layout .ui-textarea,
  .admin-layout .ui-select-trigger {
    @apply rounded-lg border-slate-200 bg-white shadow-none;
  }

  .admin-layout .ui-select-content {
    @apply rounded-xl border-slate-200 bg-white text-slate-700 shadow-lg;
  }

  .admin-layout .ui-select-item {
    @apply rounded-md py-2;
  }

  .admin-layout .ui-button {
    @apply rounded-lg font-medium shadow-none;
  }

  .admin-layout .ui-button[data-variant="default"] {
    @apply bg-indigo-600 text-white hover:bg-indigo-700;
  }

  .admin-layout .ui-button[data-variant="outline"] {
    @apply border-slate-200 bg-white text-slate-700 hover:bg-slate-50;
  }

  .admin-layout .ui-button[data-variant="ghost"] {
    @apply text-slate-500 hover:bg-slate-100 hover:text-slate-900;
  }

  .admin-layout .ui-button.admin-primary-gradient {
    @apply bg-gradient-to-r from-[#4F46E5] to-[#7C3AED] text-white hover:from-[#4338CA] hover:to-[#6D28D9];
  }

  .admin-layout .ui-badge {
    @apply rounded-full text-[11px] font-medium;
  }

  .admin-layout .ui-badge[data-variant="default"] {
    @apply border-indigo-200 bg-indigo-50 text-indigo-700;
  }

  .admin-layout .ui-badge[data-variant="secondary"] {
    @apply border-slate-200 bg-slate-100 text-slate-600;
  }

  .admin-layout .ui-badge[data-variant="destructive"] {
    @apply border-red-200 bg-red-50 text-red-600;
  }

  .admin-layout .ui-badge[data-variant="outline"] {
    @apply border-slate-200 text-slate-600;
  }

  .admin-layout .ui-dialog-overlay,
  .admin-layout .ui-alert-dialog-overlay {
    @apply bg-slate-900/45;
  }

  .admin-layout .ui-dialog-content,
  .admin-layout .ui-alert-dialog-content {
    @apply rounded-2xl border-slate-200 bg-white shadow-xl;
  }
}

.chat-surface {
  @apply bg-white/80 backdrop-blur-xl border border-border/60 shadow-soft;
}

textarea {
  field-sizing: content;
}

.dot-flash::after {
  content: "";
  @apply inline-block w-1.5 h-1.5 rounded-full bg-muted-foreground align-middle ml-1 animate-blink;
}

.ai-wait {
  display: inline-flex;
  align-items: center;
  gap: 6px;
  color: #999999;
  font-size: 13px;
}

.ai-wait-dots {
  display: inline-flex;
  align-items: center;
  gap: 4px;
  height: 14px;
}

.ai-wait-dot {
  width: 6px;
  height: 6px;
  border-radius: 999px;
  background: #CCCCCC;
  animation: ai-wait-bounce 1.2s ease-in-out infinite;
}

.ai-wait-dot:nth-child(2) {
  animation-delay: 0.15s;
}

.ai-wait-dot:nth-child(3) {
  animation-delay: 0.3s;
}

@keyframes ai-wait-bounce {
  0%,
  80%,
  100% {
    transform: translateY(0);
    opacity: 0.6;
  }
  40% {
    transform: translateY(-4px);
    opacity: 1;
  }
}

.sidebar-scroll {
  scrollbar-width: none;
}

.sidebar-scroll::-webkit-scrollbar {
  width: 0;
  height: 0;
}

.sidebar-scroll::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.15);
  border-radius: 2px;
}

.sidebar-scroll::-webkit-scrollbar-track {
  background: transparent;
}

.sidebar-scroll:hover {
  scrollbar-width: thin;
}

.sidebar-scroll:hover::-webkit-scrollbar {
  width: 4px;
  height: 4px;
}

.sidebar-scroll:hover::-webkit-scrollbar-thumb {
  background: rgba(0, 0, 0, 0.25);
}

.user-message {
  background: #F5F5F5;
  color: #333333;
  padding: 10px 16px;
  border-radius: 16px 16px 4px 16px;
  max-width: 80%;
  width: fit-content;
  margin-left: auto;
  font-size: 15px;
  line-height: 1.5;
  word-break: break-word;
  overflow-wrap: break-word;
  white-space: pre-wrap;
}
